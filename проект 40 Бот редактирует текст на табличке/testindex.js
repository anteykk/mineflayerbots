const mineflayer = require('mineflayer')
const { Vec3 } = require('vec3') 

// --- ะะะะคะะะฃะะะฆะะฏ ะะะขะ ---
const options = {
ย host: 'localhost',
ย port: 3333,
ย username: 'SimpleBot',
ย version: '1.20' // ะะฐะถะฝะพ ะดะปั ะดะฒัััะพัะพะฝะฝะธั ัะฐะฑะปะธัะตะบ
}
// ---

const bot = mineflayer.createBot(options)

const SIGN_NAMES = [
ย 'oak_sign', 'spruce_sign', 'birch_sign', 'jungle_sign', 
ย 'acacia_sign', 'dark_oak_sign', 'cherry_sign', 'bamboo_sign', 
];

// ะคัะฝะบัะธั-ะฟะพะผะพัะฝะธะบ ะดะปั ะพะถะธะดะฐะฝะธั
const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

bot.on('spawn', async () => {
ย console.log(`[Bot] ะะะจะะ ะะ ะกะะะะะ`)

ย try {
ย ย // ะะฐะตะผ ะผะธัั ะฟัะพะณััะทะธัััั
ย ย await sleep(1000); 

    // 1. ะะะะกะ ะขะะะะะงะะ
ย ย const signBlock = bot.findBlock({
ย ย ย ย matching: (block) => SIGN_NAMES.includes(block.name),
ย ย ย ย maxDistance: 16, 
ย ย ย ย count: 1 
ย ย });

ย ย if (!signBlock) {
ย ย ย ย console.log('[Bot] โ ะขะฐะฑะปะธัะบะฐ ะฝะต ะฝะฐะนะดะตะฝะฐ ะฒ ัะฐะดะธััะต 16 ะฑะปะพะบะพะฒ.');
ย ย ย ย return;
ย ย }

    console.log(`[Bot] โ ะะฐะนะดะตะฝะฐ ัะฐะฑะปะธัะบะฐ ะฟะพ: ${signBlock.position}`);

    // 2. ะะะข ะกะะะขะะะข ะะ ะขะะะะะงะะฃ (ะะพะดะณะพัะพะฒะบะฐ ะบ ะฒะทะฐะธะผะพะดะตะนััะฒะธั)
    const lookPosition = signBlock.position.offset(0.5, 0.5, 0.5);
    await bot.lookAt(lookPosition, true); 
    console.log('[Bot] ๐ ะกะผะพััั ะฝะฐ ัะฐะฑะปะธัะบั...');
    
    // 3. ะะะขะะะะฆะะฏ ะะะะะ (ะัะบัััะธะต ะธะฝัะตััะตะนัะฐ ัะฐะฑะปะธัะบะธ)
    // ะะบัะธะฒะฐัะธั ะฝะตะพะฑัะพะดะธะผะฐ ะดะปั ัะพะณะพ, ััะพะฑั ัะตัะฒะตั ะพะถะธะดะฐะป ัะปะตะดัััะตะณะพ ะฟะฐะบะตัะฐ ั ัะตะบััะพะผ.
    // ะัะปะธ ะฑะพั ะฝะต ะดะตัะถะธั ะฟัะตะดะผะตั, ะฒัะพัะพะน ะฐัะณัะผะตะฝั (faceVector) ะฝะต ะฝัะถะตะฝ.
    await bot.activateBlock(signBlock);
    console.log('[Bot] ๐ฑ๏ธ ะะบัะธะฒะธัะพะฒะฐะป (ะบะปะธะบะฝัะป) ัะฐะฑะปะธัะบั...');

    // 4. ะะะะะะขะะะะ ะขะะะกะขะ
ย ย const frontText = [
ย ย ย ย '--- FRONT SIDE ---'
ย ย ];
ย ย 
ย ย const backText = [
ย ย ย ย '--- BACK SIDE ---',
ย ย ย ย 'ะกะตะบัะตัะฝัะน ัะตะบัั:',
ย ย ย ย 'ะะฐะบััะฒะฐั ัะฐะฑะปะธัะบั',
ย ย ย ย '๐'
ย ย ];
ย ย 
    // 5. ะะะะะกะฌ ะขะะะกะขะ
    // ะัะฟะพะปัะทัะตะผ setSignText, ะบะพัะพััะน ัะฒะปัะตััั ะฟัะฐะฒะธะปัะฝัะผ ะผะตัะพะดะพะผ.
    // ะัะปะธ ะฒั ัะฒะตัะตะฝั, ััะพ ะธัะฟะพะปัะทัะตัะต ัััะฐัะตะฒัะธะน ะผะตัะพะด, ะทะฐะผะตะฝะธัะต ะฝะฐ:
    await bot.updateSign(signBlock, `ะฒะฐั ะฒะฐั ะฒะฐัะฐ \n ัะตะดะฐะบัะธััั ัะตะบัั \n ะฝะฐ ัะฐะฑะปะธัะบะต`)

    console.log('[Bot] โ ะขะตะบัั ััะฟะตัะฝะพ ะทะฐะฟะธัะฐะฝ ะฝะฐ ัะฐะฑะปะธัะบะต.');

ย } catch (err) {
ย ย console.error(`[Bot] โ ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ ะฟัะธ ัะฐะฑะพัะต ั ัะฐะฑะปะธัะบะพะน: ${err.message}`);
ย }
});